<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>CRAZE.AI | MOBILE ADMIN</title>
  
  <!-- 字体 -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
  <!-- Tailwind (用于预览) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Netlify Identity -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <style>
    /* =========================================
       全局变量与基础设置
       ========================================= */
    :root {
      --neon-blue: #00f3ff;
      --neon-red: #ff0055;
      --bg-dark: #000000;
      --bg-panel: #0a0a0a;
      --border: #222;
    }

    body {
      background-color: var(--bg-dark) !important;
      font-family: 'Rajdhani', sans-serif !important;
      -webkit-font-smoothing: antialiased;
    }

    /* 暴力移除默认的白色背景 */
    div {
      scrollbar-width: thin;
      scrollbar-color: #333 #000;
    }

    /* =========================================
       UI 组件暴力重写 (桌面 + 移动通用)
       ========================================= */
    
    /* 顶部导航条 */
    [class*="AppHeader-header"] {
      background-color: rgba(0,0,0,0.9) !important;
      border-bottom: 1px solid var(--neon-blue) !important;
      height: 64px !important;
      box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
    }

    /* 侧边栏 */
    [class*="SidebarContainer"] {
      background-color: var(--bg-panel) !important;
      border-right: 1px solid var(--border) !important;
    }
    [class*="SidebarNavLink"] {
      color: #666 !important;
      font-family: 'Orbitron', sans-serif !important;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    [class*="SidebarNavLink"].sidebar-active {
      color: var(--neon-blue) !important;
      background: linear-gradient(90deg, rgba(0,243,255,0.1), transparent) !important;
      border-left: 3px solid var(--neon-blue) !important;
    }

    /* 卡片列表 (Collection) */
    [class*="CollectionTop"] { background-color: var(--bg-dark) !important; }
    
    [class*="Card"] {
      background-color: #080808 !important;
      border: 1px solid #222 !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      margin-bottom: 10px !important;
    }
    [class*="Card"]:hover {
      border-color: var(--neon-red) !important;
    }
    [class*="Card-cardTop"] { color: #fff !important; font-weight: bold; }

    /* 编辑器输入框 */
    [class*="EditorContainer"] { background-color: var(--bg-dark) !important; }
    [class*="EditorToolbar"] { 
      background-color: #000 !important; 
      border-bottom: 1px solid #333 !important;
    }

    label {
      color: var(--neon-blue) !important;
      font-family: 'Orbitron', sans-serif !important;
      font-size: 11px !important;
      margin-top: 15px !important;
    }

    input[type="text"], textarea, [class*="Select-control"] {
      background-color: #111 !important;
      border: 1px solid #333 !important;
      color: #fff !important;
      padding: 15px !important; /* 增大触控区 */
      border-radius: 0 !important;
      font-size: 16px !important; /* iOS 防缩放标准 */
    }
    input:focus, textarea:focus {
      border-color: var(--neon-blue) !important;
      box-shadow: 0 0 10px rgba(0,243,255,0.2) !important;
    }

    /* 图片上传按钮 */
    [class*="FileWidgetButton"] {
      background-color: #111 !important;
      color: #888 !important;
      border: 1px dashed #444 !important;
      padding: 20px !important;
    }

    /* 按钮样式 */
    button {
      text-transform: uppercase;
      font-family: 'Orbitron', sans-serif !important;
      letter-spacing: 1px;
      border-radius: 0 !important;
    }
    /* 发布按钮 */
    button[class*="Button-success"] {
      background-color: var(--neon-red) !important;
      color: #fff !important;
      box-shadow: 0 0 15px rgba(255,0,85,0.4);
    }

    /* =========================================
       移动端专属适配 (Max-width: 768px)
       ========================================= */
    @media (max-width: 768px) {
      
      /* 1. 布局调整：让主容器填满屏幕 */
      body, #nc-root { overflow-x: hidden; }
      
      /* 2. 隐藏移动端不需要的元素 */
      [class*="AppHeader-breadcrumb"], /* 顶部面包屑 */
      [class*="AppHeader-actions"],    /* 顶部 Quick Add */
      [class*="SidebarFooter"],        /* 侧边栏底部 */
      [class*="CollectionTop-viewControls"] /* 列表视图切换 */
      {
        display: none !important;
      }

      /* 3. 顶部导航栏简化 */
      [class*="AppHeader-content"] {
        padding: 0 10px !important;
        justify-content: space-between !important;
      }
      /* 汉堡菜单按钮增大 */
      button[class*="AppHeader-menuButton"] {
        width: 44px;
        height: 44px;
        color: white !important;
      }

      /* 4. 列表页面优化 */
      [class*="CollectionContainer"] {
        padding: 10px !important;
      }
      [class*="Card"] {
        width: 100% !important;
        margin: 0 0 15px 0 !important;
      }

      /* 5. 编辑页面优化 */
      [class*="EditorContent"] {
        padding: 10px !important;
        display: flex;
        flex-direction: column;
      }
      
      /* 6. 发布栏固定在底部? 不，放在顶部更安全，但要防止遮挡 */
      [class*="EditorToolbar"] {
        position: sticky;
        top: 0;
        z-index: 50;
        padding: 10px !important;
        flex-wrap: wrap;
      }

      /* 7. 预览切换开关 (Editor / Preview) */
      [class*="EditorToggle"] {
        width: 100%;
        margin-top: 10px;
        background: #111;
        border: 1px solid #333;
        color: #888;
      }
      [class*="EditorToggle-active"] {
        background: var(--neon-blue);
        color: #000;
        font-weight: bold;
      }

      /* 8. 修复弹窗/下拉菜单被遮挡的问题 */
      [class*="Dropdown-content"] {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        width: 90% !important;
        max-height: 80vh !important;
        background: #111 !important;
        border: 1px solid var(--neon-blue) !important;
        z-index: 9999 !important;
      }
    }
  </style>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <script>
    // --- 定义移动端优先的预览组件 ---
    var PromptsPreview = createClass({
      render: function() {
        var entry = this.props.entry;
        var image = entry.getIn(['data', 'image']);
        var title = entry.getIn(['data', 'title']) || 'UNTITLED';
        var tool = entry.getIn(['data', 'tool']) || 'AI Tool';
        var prompt = entry.getIn(['data', 'prompt']) || 'No prompt content...';
        
        // 使用 h (React.createElement)
        return h('div', {className: 'w-full bg-black min-h-screen text-white p-4 font-sans'},
          
          // 标题栏模拟
          h('div', {className: 'text-xs font-bold text-gray-500 mb-4 tracking-widest border-b border-gray-800 pb-2'}, 'PREVIEW // MOBILE MODE'),

          // 卡片主体
          h('div', {className: 'relative w-full aspect-[3/4] bg-gray-900 border border-gray-800 rounded mb-6 overflow-hidden'},
             image ? h('img', {src: image, className: 'w-full h-full object-cover'}) : h('div', {className: 'flex items-center justify-center h-full text-gray-600 text-xs'}, 'NO IMAGE UPLOADED'),
             
             // 渐变遮罩
             h('div', {className: 'absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90'}),
             
             // 底部文字
             h('div', {className: 'absolute bottom-4 left-4 right-4'},
               h('span', {className: 'inline-block px-2 py-1 bg-pink-600 text-white text-[10px] font-bold mb-2'}, tool),
               h('h1', {className: 'text-xl font-bold font-mono text-white truncate'}, title)
             )
          ),

          // Prompt 文字区
          h('div', {className: 'space-y-2'},
            h('h3', {className: 'text-cyan-400 text-xs font-bold uppercase tracking-widest'}, 'Prompt Command'),
            h('div', {className: 'p-4 bg-gray-900 border border-gray-800 text-gray-400 text-xs font-mono leading-relaxed break-all'}, prompt)
          )
        );
      }
    });

    CMS.registerPreviewTemplate("prompts", PromptsPreview);
    
    // 注入样式到预览 iframe
    CMS.registerPreviewStyle("https://cdn.tailwindcss.com");
    // 强制预览 iframe 的背景为黑色
    CMS.registerPreviewStyle("body { background-color: #000 !important; }");
  </script>
</body>
</html>


